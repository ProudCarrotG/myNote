
# 中断 
- 请求系统服务
- 实现并行工作
- 处理突发事件
- 满足实施要求

	是实现多任务的基础

	中断源：能够引起中断发生的事件
## 分类 
### 从性质和激活手段
- 强迫性 （由某种事故或外部请求信息引起
	- 机器故障终端事件
	- 程序性中断事件  ----内中断
	- 外部中断事件
	- 输入输出中断事件
- 自愿性 （正在运行的程序所期待的事件
	- 访管中断（系统调用）
### 按事件来源和实现手段
- 硬中断  
	- 外中断（中断、异步中断）
		- 吃饭咽下一口之后才停下吃饭行为（等待当前命令执行完毕），喊老师好（中断处理），吃饭被停下
	- 内中断（异常、同步中断）
		- 吃饭被噎住马上停下吃饭行为，当前命令未执行完毕，立即执行中断处理
- 软中断
	- 信号
	- 软件中断


## 处理中断
- 发现中断源
- 保护现场 （保存PC、寄存器的值等）
- 转向处理中断、异常事件的处理程序
- 恢复现场

# 进程
**可并发执行的程序**在某个**数据集合上**的**一次**计算活动，也是操作系统进行资源分配和保护的**基本单位**
进程是一个既能用来共享资源，又能描述程序并发执行过程的一个基本单位

与程序区分，进程是指程序执行，执行一次即产生一个进程或多个进程

刻画系统的**动态性**

|      程序      |       进程       |
|:--------------:|:----------------:|
|      静态      |       动态       |
|      辅存      |   主存（内存）   |
|      永久      |       暂时       |
|  **1个**程序   | 产生**多个**进程 |
| **多个**程序被 | **一个**进程共享 |

- 结构性
- 共享性
- 动态性
- 独立性
- 制约性
- 并发性

![[Pasted image 20231008095143.png]]


```
[时间片，简单来说，就是CPU分配给各个程序的时间，使各个程序从表面上看是同时进行的，而不会造成CPU资源浪费](https://zhuanlan.zhihu.com/p/589469876)[1](https://zhuanlan.zhihu.com/p/589469876)[2](https://baike.baidu.com/item/%E6%97%B6%E9%97%B4%E7%89%87/6525414)[。在宏观上，我们可以同时打开多个应用程序，每个程序并行不悖，同时运行。但是在微观上，由于只有一个CPU，一次只能处理程序要求的一部分](https://zhuanlan.zhihu.com/p/589469876)[1](https://zhuanlan.zhihu.com/p/589469876)。

[在谈到时间片时用到最多的概念是时间片轮转，时间片轮转调度是一种最古老，最简单，最公平且使用最广的算法是时间片调度。每个进程被分配一个时间段，称作它的时间片，即该进程允许运行的时间。如果在时间片结束时进程还在运行，则CPU将被剥夺并分配给另一个进程。如果进程在时间片结束前阻塞或结束，则CPU当即进行切换](https://zhuanlan.zhihu.com/p/589469876)[1](https://zhuanlan.zhihu.com/p/589469876)。

[在Linux系统中，时间片通常很短（在Linux上为5ms－800ms），用户不会感觉到](https://zhuanlan.zhihu.com/p/589469876)[2](https://baike.baidu.com/item/%E6%97%B6%E9%97%B4%E7%89%87/6525414)[。这些进程“看起来像”同时运行的，实则是轮番穿插地运行](https://baike.baidu.com/item/%E6%97%B6%E9%97%B4%E7%89%87/6525414)[2](https://baike.baidu.com/item/%E6%97%B6%E9%97%B4%E7%89%87/6525414)[。这样就可以保证就绪队列中的所有进程，在一给定的时间内，均能获得一时间片的处理机执行时间](https://zhuanlan.zhihu.com/p/589469876)[1](https://zhuanlan.zhihu.com/p/589469876)。
```

	五态图

## 挂起
暂时不参与低级调度，释放其占有的资源
挂起包括两个操作：挂出、挂回

	七态图

- 即将被执行的不能被挂起


## 进程控制块 PCB
一个进程对应一个PCB
各种数据变量的集合
由操作系统创建
进程结束后os回收pcb
对进程的管理 ＝ 对pcb的管理 （相当于指针
包含信息：
1. 标识信息
	1. 相对固定
2. 现场信息
	1. 动态
	2. 各种寄存器变量
3. 控制信息
	1. 存储状态（就绪、等待等）

## 缺点
切换开销大
通信代价大
并发度不高
不适应计算和分布并行计算的要求
不符合客户/服务器计算的要求
需要申请资源

# 线程
因为[[#进程#缺点]]，所以引入线程，从进程中优化
不需要申请资源，直接进行任务调度
线程隶属某个进程，一个进程可以申请多个线程
资源由进程争夺，争夺后分配给线程，资源使用后进程回收

# 进程调度

从进程开始到结束一般经过三个调度
- 高级调度/**作业**调度/长程调度
- 中级调度/[[#挂起]]（非必须）
- 低级调度/**进程**调度/短程调度


## !!周转时间
批处理用户从作业提交给系统开始到完成的时间**间隔**称为周转时间
周转时间有且只有一个
方便调度算法对进程的性能评测  重要指标！
周转时间越短，性能越好

## 吞吐率
单位时间内处理的作业数

## 公平性
确保每个进程都能获得合理的CPU份额或其他资源，不会出现饥饿情况